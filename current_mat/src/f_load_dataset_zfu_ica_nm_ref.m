% zfu_ica- means preprocessed by Zening, all subjects including those used in the
% original paper and those sent later
% Medication classes:
% 1 = non-responder
% 2 = MDD
% 3 = Bipolar
% 4 = Controls
function params = load_dataset_zfu_ica_nm_ref( classes_ )
    ica_path = '../results/zfu_136_nm_ref/'
    ic_labels_path = '../results/neuromark_ic_labels.csv'
    % this is manually generated by resolving the ICA selected subject list and the OSUCH diagnosis spreadsheet
    sub_info_file = '../results/zfu_ica_subjects.csv'
    
    % get number of voxels from param file
    t1 = strip( ls( [ica_path '*param*'] ) );
    t1 = load( t1 );
    n_voxels = numel( t1.sesInfo.mask_ind );

    % grab the domain labels
    ic_labels = readcell( ic_labels_path );
    domains = unique( sort( ic_labels(:,2) ) )
    n_domains = length( domains );

    % grab the subject labels
    y = readcell( sub_info_file, 'delimiter', ',' );
    y = cell2mat( y(2:end,2) );
    
    y = double( categorical( y ) );
    sub_idx = 1:length( y );
    % handle classes input
    if ~isempty( classes_ )
        classes_ = str2num( classes_ );
        sub_idx = find( ismember(y, classes_) );
        y = y( sub_idx );
    end
    
    disp( sub_idx )
    disp( length( sub_idx ) )
    disp( ['classes: '] )
    unique(y)

    file_pat = fullfile( ica_path, 'nmref136_ica_c$1-1.mat' )

    % return values
    params.ica_path = ica_path;
    params.file_pat = file_pat;
    params.y = y;
    params.n_voxels = n_voxels;
    params.ic_labels = ic_labels;
    params.domains = domains;
    % selct particular subjects from ICA result
    params.sub_idx = sub_idx;
    
    